System.register("chunks:///_virtual/Agent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Maths.ts"],(function(i){"use strict";var t,e,n,r,o,a;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy,n=i.Vec3},function(i){r=i.Vector2,o=i.RVOMath,a=i.Line}],execute:function(){e._RF.push({},"27880uNZi9CTLwDzDTO1CDR","Agent",void 0);var l=i("ObserverObj",(function(i){this.value=void 0,i&&(this.value=i)})),u=(i("KeyValuePair",(function(i,t){this.Key=void 0,this.Value=void 0,this.Key=i,this.Value=t})),i("RVOConfig",(function(){})));u.agentCount=10,u.neighborDist=.75,u.radius=.5,u.maxSpeed=1,u.velocity=new n,u.maxNeighbors=10,u.timeHorizon=5,u.timeHorizonObst=0,u.timeStep=.05,i("Agent",function(){function i(){}var e=i.prototype;return e.check=function(i,t){var e=1/u.timeHorizon,n=r.subtract(t.getCenter(),i.getCenter()),l=r.subtract(i.newVelocity,t.newVelocity),c=i.neighborDist+t.neighborDist,s=o.sqr(c),d=o.absSq(n),v=new r,p=new r;if(d>s){var y=r.subtract(l,r.multiply2(e,n)),m=o.absSq(y),f=r.multiply(y,n);if(f<0&&o.sqr(f)>s*m){var h=o.sqrt(m),g=r.division(y,h);p=new r(g.y,-g.x),v=r.multiply2(c*e-h,g)}else{var b=o.sqrt(d-s);p=o.det(n,y)>0?r.division(new r(n.x*b-n.y*c,n.x*c+n.y*b),d):r.division(new r(n.x*b+n.y*c,-n.x*c+n.y*b),-d);var w=r.multiply(l,p);v=r.subtract(r.multiply2(w,p),l)}}else{var x=1/u.timeStep,V=r.subtract(l,r.multiply2(x,n)),q=o.abs(V),L=r.division(V,q);p=new r(L.y,-L.x),v=r.multiply2(c*x-q,L)}var P=new a,S=i.weight/(i.weight+t.weight);P.direction=new r(p.x,p.y),P.point=r.addition(i.newVelocity,r.multiply2(S,v)),i.orcaLines.push(P)},e.process=function(i){for(var t=0,e=i.length;t<e;t++){var n=i[t];if(n.isAgent&&n.orcaLines.length>0){if(!n.isRemove&&n.object){var o=new l(new r(n.newVelocity.x,n.newVelocity.y)),a=this.linearProgram2(n.orcaLines,n.maxVelocity,n.prefVelocity,!1,o);if(a<n.orcaLines.length&&this.linearProgram3(n.orcaLines,n.weight,0,a,n.maxVelocity,o),n.object){var u=o.value,c=n.object.velocity;c.x=u.x,c.y=u.y,c.z=0}}n.orcaLines.length=0}}},e.linearProgram1=function(i,t,e,n,a,l){var u=r.multiply(i[t].point,i[t].direction),c=o.sqr(u)+o.sqr(e)-o.absSq(i[t].point);if(c<0)return!1;for(var s=o.sqrt(c),d=-u-s,v=-u+s,p=0;p<t;++p){var y=o.det(i[t].direction,i[p].direction),m=o.det(i[p].direction,r.subtract(i[t].point,i[p].point));if(o.fabs(y)<=o.RVO_EPSILON){if(m<0)return!1}else{var f=m/y;if(y>0?v=Math.min(v,f):d=Math.max(d,f),d>v)return!1}}if(a)r.multiply(n,i[t].direction)>0?l.value=r.addition(i[t].point,r.multiply2(v,i[t].direction)):l.value=r.addition(i[t].point,r.multiply2(d,i[t].direction));else{var h=r.multiply(i[t].direction,r.subtract(n,i[t].point));l.value=h<d?r.addition(i[t].point,r.multiply2(d,i[t].direction)):h>v?r.addition(i[t].point,r.multiply2(v,i[t].direction)):r.addition(i[t].point,r.multiply2(h,i[t].direction))}return!0},e.linearProgram2=function(i,t,e,n,a){n?a.value=r.multiply2(t,e):o.absSq(e)>o.sqr(t)?a.value=r.multiply2(t,o.normalize(e)):a.value=e;for(var l=0;l<i.length;++l)if(o.det(i[l].direction,r.subtract(i[l].point,a.value))>0){var u=new r(a.value.x,a.value.y);if(!this.linearProgram1(i,l,t,e,n,a))return a.value=u,l}return i.length},e.linearProgram3=function(i,t,e,n,l,u){for(var c=0,s=n;s<i.length;++s)if(o.det(i[s].direction,r.subtract(i[s].point,u.value))>c){for(var d=[],v=0;v<e;++v)d[d.length]=i[v];for(var p=e;p<s;++p){var y=new a,m=o.det(i[s].direction,i[p].direction);if(o.fabs(m)<=o.RVO_EPSILON){if(r.multiply(i[s].direction,i[p].direction)>0)continue;y.point=r.multiply2(t,r.addition(i[s].point,i[p].point))}else y.point=r.addition(i[s].point,r.multiply2(o.det(i[p].direction,r.subtract(i[s].point,i[p].point))/m,i[s].direction));var f=r.subtract(i[p].direction,i[s].direction);o.absSq(f)>0&&(y.direction=o.normalize(f),d[d.length]=y)}var h=new r(u.value.x,u.value.y);this.linearProgram2(d,l,new r(-i[s].direction.y,i[s].direction.x),!0,u)<d.length&&(u.value=h),c=o.det(i[s].direction,r.subtract(i[s].point,u.value))}},t(i,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new i),this._inst}}]),i}())._inst=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/AILib.ts",["cc"],(function(t){"use strict";var r,n,e,i;return{setters:[function(t){r=t.cclegacy,n=t.Vec3,e=t.Quat,i=t.Vec2}],execute:function(){t({sphereAABBDistance:c,sphereOBBDistance:function(t,r,i,u,o){return n.subtract(y,t,i),e.conjugate(a,u),n.transformQuat(x,y,a),c(x,r,o)}}),r._RF.push({},"e200arLWgRK2aEVd3mb65un","AILib",void 0);var x={x:0,y:0,z:0},u={x:0,y:0,z:0},y={x:0,y:0,z:0},a={x:0,y:0,z:0,w:1};function c(t,r,e){return u.x=Math.max(-e.x,Math.min(t.x,e.x)),u.y=Math.max(-e.y,Math.min(t.y,e.y)),u.z=Math.max(-e.z,Math.min(t.z,e.z)),n.subtract(u,u,t),n.dot(u,u)<=r*r}t("obbIntersect",(function(t,r,n,e,i,x){var u,y=r.x,a=r.y,c=r.z,o=n.m00,f=n.m01,s=n.m02,h=n.m03,m=n.m04,l=n.m05,v=n.m06,g=n.m07,M=n.m08,z=i.x,p=i.y,b=i.z,d=x.m00,w=x.m01,L=x.m02,I=x.m03,P=x.m04,R=x.m05,A=x.m06,B=x.m07,C=x.m08,D=o*d+f*w+s*L,V=o*I+f*P+s*R,_=o*A+f*B+s*C,q=h*d+m*w+l*L,E=h*I+m*P+l*R,F=h*A+m*B+l*C,N=v*d+g*w+M*L,O=v*I+g*P+M*R,Q=v*A+g*B+M*C,S=e.x-t.x,j=e.y-t.y,k=e.z-t.z,K=S*o+j*f+k*s,W=S*h+j*m+k*l,G=S*v+j*g+k*M,H=Number.EPSILON,J=(D>=0?D:-D)+H,T=(V>=0?V:-V)+H,U=(_>=0?_:-_)+H,X=(q>=0?q:-q)+H,Y=(E>=0?E:-E)+H,Z=(F>=0?F:-F)+H,$=(N>=0?N:-N)+H,tt=(O>=0?O:-O)+H,rt=(Q>=0?Q:-Q)+H;return!((K>=0?K:-K)>y+(z*J+p*T+b*U))&&(!((W>=0?W:-W)>a+(z*X+p*Y+b*Z))&&(!((G>=0?G:-G)>c+(z*$+p*tt+b*rt))&&(!(((u=K*D+W*q+G*N)>=0?u:-u)>y*J+a*X+c*$+z)&&(!(((u=K*V+W*E+G*O)>=0?u:-u)>y*T+a*Y+c*tt+p)&&(!(((u=K*_+W*F+G*Q)>=0?u:-u)>y*U+a*Z+c*rt+b)&&(!(((u=G*q-W*N)>=0?u:-u)>a*$+c*X+(p*U+b*T))&&(!(((u=G*E-W*O)>=0?u:-u)>a*tt+c*Y+(z*U+b*J))&&(!(((u=G*F-W*Q)>=0?u:-u)>a*rt+c*Z+(z*T+p*J))&&(!(((u=K*N-G*D)>=0?u:-u)>y*$+c*J+(p*Z+b*Y))&&(!(((u=K*O-G*V)>=0?u:-u)>y*tt+c*T+(z*Z+b*X))&&(!(((u=K*Q-G*_)>=0?u:-u)>y*rt+c*U+(z*Y+p*X))&&(!(((u=W*D-K*q)>=0?u:-u)>y*X+a*J+(p*rt+b*tt))&&(!(((u=W*V-K*E)>=0?u:-u)>y*Y+a*T+(z*rt+b*$))&&!(((u=W*_-K*F)>=0?u:-u)>y*Z+a*U+(z*tt+p*$)))))))))))))))}));function o(t,r,n,e){var i=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x),x=(r.x-t.x)*(t.y-n.y)-(r.y-t.y)*(t.x-n.x),u=(e.y-n.y)*(r.x-t.x)-(e.x-n.x)*(r.y-t.y);if(0!==u){var y=i/u,a=x/u;if(y>=0&&y<=1&&a>=0&&a<=1)return!0}return!1}var f=new i,s=new i,h=new i,m=new i;function l(t,r,n){for(var e=n.length,i=0;i<e;++i){if(o(t,r,n[i],n[(i+1)%e]))return!0}return!1}function v(t,r){for(var n=!1,e=t.x,i=t.y,x=r.length,u=0,y=x-1;u<x;y=u++){var a=r[u].x,c=r[u].y,o=r[y].x,f=r[y].y;c>i!=f>i&&e<(o-a)*(i-c)/(f-c)+a&&(n=!n)}return n}function g(t,r,n,e){var i,x=n.x-r.x,u=n.y-r.y,y=x*x+u*u,a=((t.x-r.x)*x+(t.y-r.y)*u)/y;return i=e?y?a<0?r:a>1?n:f.set(r.x+a*x,r.y+a*u):r:f.set(r.x+a*x,r.y+a*u),x=t.x-i.x,u=t.y-i.y,Math.sqrt(x*x+u*u)}var M=t("default",(function(){}));M.lineLine=o,M.lineRect=function(t,r,n){var e=f.set(n.x,n.y),i=s.set(n.x,n.yMax),x=h.set(n.xMax,n.yMax),u=m.set(n.xMax,n.y);return!!o(t,r,e,i)||(!!o(t,r,i,x)||(!!o(t,r,x,u)||!!o(t,r,u,e)))},M.linePolygon=l,M.rectRect=function(t,r){var n=t.x,e=t.y,i=t.x+t.width,x=t.y+t.height,u=r.x,y=r.y,a=r.x+r.width,c=r.y+r.height;return n<=a&&i>=u&&e<=c&&x>=y},M.rectPolygon=function(t,r){var n=f.set(t.x,t.y),e=s.set(t.x,t.yMax),i=h.set(t.xMax,t.yMax),x=m.set(t.xMax,t.y);if(l(n,e,r))return!0;if(l(e,i,r))return!0;if(l(i,x,r))return!0;if(l(x,n,r))return!0;for(var u=0,y=r.length;u<y;++u)if(t.contains(r[u]))return!0;return!!v(n,r)||(!!v(e,r)||(!!v(i,r)||!!v(x,r)))},M.rectCircle=function(t,r,n){var e=r.x,i=r.y,x=t.x,u=t.y,y=t.width,a=t.height,c=e,o=i;e<x?c=x:e>x+y&&(c=x+y),i<u?o=u:i>u+a&&(o=u+a);var f=e-c,s=i-o;return Math.sqrt(f*f+s*s)<=n},M.polygonPolygon=function(t,r){var n,e;for(n=0,e=t.length;n<e;++n){if(l(t[n],t[(n+1)%e],r))return!0}for(n=0,e=r.length;n<e;++n)if(v(r[n],t))return!0;for(n=0,e=t.length;n<e;++n)if(v(t[n],r))return!0;return!1},M.circleCircle=function(t,r,n,e){return i.distance(t,n)<r+e},M.polygonCircle=function(t,r,n){var e=r;if(v(e,t))return!0;for(var i=0,x=t.length;i<x;i++){if(g(e,0===i?t[t.length-1]:t[i-1],t[i],!0)<n)return!0}return!1},M.pointInPolygon=v,M.pointLineDistance=g,r._RF.pop()}}}));

System.register("chunks:///_virtual/Body.ts",["cc","./Object.ts"],(function(t){"use strict";var i,s,e,h,n,r;return{setters:[function(t){i=t.cclegacy,s=t.Quat,e=t.Vec2,h=t.Vec3,n=t.Mat3},function(t){r=t.Dirty}],execute:function(){i._RF.push({},"35d5eaYM9dJwrqPskERJ5FA","Body",void 0);t("cBody",function(){function t(t){this.id=0,this.fid=-1,this.mask=0,this.group=0,this.shape=null,this.object=null,this.weight=0,this.isDirty=7,this.lower=0,this.upper=0,this.aabb=[0,0,0,0,0,0],this.isRemove=!1,this.isRetrieve=!0,this.isIdentity=!0,this.inCollider=!1,this.raidus=0,this.points=[],this.center=new h,this.rotMat3=new n,this.halfSize=new h,this.scale=new h(1,1,1),this.isAgent=!1,this.maxNeighbors=0,this.neighborDist=0,this.maxVelocity=0,this.newVelocity=new h,this.prefVelocity=new h,this.orcaLines=[],this.object=t}var i=t.prototype;return i.updateBound=function(t){void 0===t&&(t=r.NON);var i=this.object;if(t|=i.hasChangeDirty(),this.isAgent&&(this.newVelocity.set(i.velocity),this.prefVelocity.set(i.tryVelocity),i.velocity.set(i.tryVelocity)),t>0){var e=!1,h=this.shape;if(t&r.S){e=!0;var n=this.getScale();this.scale.x=n.x>=0?n.x:-n.x,this.scale.y=n.y>=0?n.y:-n.y,this.scale.z=n.z>=0?n.z:-n.z}if(t&r.R){this.isIdentity=!1;var o=this.getRotation();this.rotMat3.fromQuat(o),o.equals(s.IDENTITY,1e-4)&&(this.isIdentity=!0),e=!0}e&&h.updateAABB(this.getScale(),this.getRotMat3(),this.isIdentity);var a=this.aabb,c=h.aabb,u=this.getPosition();return a[0]=c[0]+u.x,a[1]=c[1]+u.y,a[2]=c[2]+u.z,a[3]=c[3]+u.x,a[4]=c[4]+u.y,a[5]=c[5]+u.z,this.isDirty=15,!0}return!1},i.clear=function(){this.shape=null,this.object=null,this.isRemove=!1,this.inCollider=!1,this.orcaLines.length=0},i.getRotMat3=function(){return this.rotMat3},i.getScale=function(){return this.object.node.worldScale},i.getPosition=function(){return this.object.node.worldPosition},i.getRotation=function(){return this.object.node.worldRotation},i.getCenter=function(){if(1&this.isDirty){this.isDirty&=-2;var t=this.aabb,i=this.center;i.x=.5*(t[0]+t[3]),i.y=.5*(t[1]+t[4]),i.z=.5*(t[2]+t[5])}return this.center},i.getRaidus=function(){if(2&this.isDirty){this.isDirty&=-3;var t=this.scale,i=this.shape.radius;this.raidus=Math.max(t.x,t.y,t.z)*i}return this.raidus},i.getHalfSize=function(){if(4&this.isDirty){this.isDirty&=-5;var t=this.scale,i=this.shape.size,s=this.halfSize;s.x=t.x*i.x*.5,s.y=t.y*i.y*.5,s.z=t.z*i.z*.5}return this.halfSize},i.getPoints=function(){if(8&this.isDirty){this.isDirty&=-9;for(var t=this.scale,i=this.getRotMat3(),s=this.getCenter(),h=this.points,n=this.shape.point2Ds,r=n.length,o=0;o<r;o++){var a=n[o].x*t.x,c=n[o].y*t.y;null==h[o]&&(h[o]=new e),h[o].x=a*i.m00+c*i.m03+0*i.m06+s.x,h[o].y=a*i.m01+c*i.m04+0*i.m07+s.y}h.length=r}return this.points},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts"],(function(t){"use strict";var e,i,n,o,r,s,u,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.Vec3,r=t.Quat,s=t.instantiate},function(t){u=t.Trigger,c=t.cObject}],execute:function(){var l,p;i._RF.push({},"10c41wzOQZNApJbN8KIuhYr","bullet",void 0);var a=n.ccclass,h=(n.property,new o);new r,t("Bullet",a("Bullet")(((p=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).lifeTime=0,e}e(i,t),i.get=function(t){var e=this.pools.pop();e||(e=s(t).getComponent(i));return e},i.put=function(t){this.pools.push(t),t.remove(!1)};var n=i.prototype;return n.update=function(t){if(this.lifeTime-=t,this.lifeTime<0)i.put(this);else{var e=this.getPosition(),n=this.velocity;h.x=e.x+n.x*t,h.y=e.y+n.y*t,h.z=e.z+n.z*t,this.setPosition(h)}},n.onTrigger=function(t,e){e!=u.exit&&i.put(this)},i}(c)).pools=[],l=p))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/bulletHell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Collider.ts","./Joystick.ts","./bullet.ts","./ghost.ts","./player.ts","./snailTail.ts","./skill.ts"],(function(t){"use strict";var e,i,n,r,l,o,a,u,s,c,p,f,y,b,g,h,m,d,w,v,z,C,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,l=t.createClass},function(t){o=t.cclegacy,a=t._decorator,u=t.Vec3,s=t.Quat,c=t.Prefab,p=t.Node,f=t.CCInteger,y=t.instantiate,b=t.Sprite,g=t.Vec2,h=t.Component},function(t){m=t.cCollider},function(t){d=t.Joystick},function(t){w=t.Bullet},function(t){v=t.Ghost},function(t){z=t.Player},function(t){C=t.SnailTail},function(t){T=t.Skill}],execute:function(){var j,k,P,_,x,B,E,H,D,M,S,F,J,L,A,I,N,R,V,G,K,O,Q,U;o._RF.push({},"14305yAyJ1MjZu4r7sFo1Ka","bulletHell",void 0);var Z=a.ccclass,q=a.property,W=new u;new s,t("BulletHell",(j=Z("BulletHell"),k=q(c),P=q(c),_=q(c),x=q(p),B=q(p),E=q(p),H=q(d),D=q({type:f,group:"Enemy Config"}),M=q({group:"Enemy Config"}),S=q({group:"Enemy Config"}),j(((U=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return e=t.call.apply(t,[this].concat(l))||this,n(e,"ghost",L,r(e)),n(e,"snailTail",A,r(e)),n(e,"player",I,r(e)),n(e,"objects",N,r(e)),n(e,"bullets",R,r(e)),n(e,"camera",V,r(e)),n(e,"joystick",G,r(e)),n(e,"max",K,r(e)),n(e,"raidus",O,r(e)),n(e,"cyclTime",Q,r(e)),e}i(e,t);var o=e.prototype;return o.onLoad=function(){e._inst=this},o.onDestroy=function(){m.inst.clear(),v.pools.length=0,T.pools.length=0,w.pools.length=0,C.pools.length=0},o.start=function(){var t=this,e=y(this.player);this.node.addChild(e);var i=1;this.schedule((function(){if(t.objects.children.length<t.max){var e=(.5+.7548776662466928*i)%1,n=(.5+.5698402909980534*i)%1,r=z.inst.getPosition();e=(e-.5)*t.raidus+r.x,n=(n-.5)*t.raidus+r.y,t.createEnemy(e,n),i++}}),this.cyclTime)},o.createEnemy=function(t,e){var i=null;(i=Math.random()>.5?v.get(this.ghost):C.get(this.snailTail)).insert(this.objects),W.set(t,e,0),i.setPosition(W),i.init()},o.update=function(t){m.inst.update(t)},o.lateUpdate=function(t){var e=z.inst.getPosition();u.lerp(W,this.camera.position,e,.25),this.camera.position=W;var i=this.node.getChildByName("bg"),n=i.getComponent(b).getMaterial(0),r=new g(e.x/512,-e.y/512);n.setProperty("tilingOffset",r),i.position=e},l(e,null,[{key:"inst",get:function(){return this._inst}}]),e}(h))._inst=null,L=e((J=U).prototype,"ghost",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(J.prototype,"snailTail",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(J.prototype,"player",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(J.prototype,"objects",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(J.prototype,"bullets",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(J.prototype,"camera",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(J.prototype,"joystick",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(J.prototype,"max",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),O=e(J.prototype,"raidus",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2e3}}),Q=e(J.prototype,"cyclTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.03}}),F=J))||F));o._RF.pop()}}}));

System.register("chunks:///_virtual/Camera3D.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,r,n,a,c,s,u,h,l,p,f,T,v,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.Node,s=t.Quat,u=t.Vec2,h=t.Camera,l=t.toRadian,p=t.Vec3,f=t.input,T=t.Input,v=t.clamp,d=t.Component}],execute:function(){var y,E,C,g,S,m,b,w;n._RF.push({},"449d7ylCR5NjpZiA2yOF6Nk","Camera3D",void 0);var D=a.ccclass,_=a.property;t("Camera3D",(y=D("Camera3D"),E=_(c),y((S=e((g=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"distance",S,r(e)),o(e,"vertical",m,r(e)),o(e,"horizontal",b,r(e)),o(e,"target",w,r(e)),e.camera=null,e.rot=new s,e.curXY=new u,e.curScale=1,e.touchCount=0,e.touchs=[{id:-1,pre:new u,cur:new u},{id:-1,pre:new u,cur:new u}],e.rotTemp=new s,e}i(e,t);var n=e.prototype;return n.start=function(){this.camera=this.getComponentInChildren(h),this.curXY.set(l(this.horizontal),-l(this.vertical)),this.camera&&(this.camera.node.position=new p(0,0,this.distance))},n.onEnable=function(){f.on(T.EventType.MOUSE_WHEEL,this.onMouseScale,this),f.on(T.EventType.TOUCH_START,this.onTouchStart,this),f.on(T.EventType.TOUCH_MOVE,this.onTouchMove,this),f.on(T.EventType.TOUCH_CANCEL,this.onTouchEnd,this),f.on(T.EventType.TOUCH_END,this.onTouchEnd,this)},n.onDisable=function(){f.off(T.EventType.MOUSE_WHEEL,this.onMouseScale,this),f.off(T.EventType.TOUCH_START,this.onTouchStart,this),f.off(T.EventType.TOUCH_MOVE,this.onTouchMove,this),f.off(T.EventType.TOUCH_CANCEL,this.onTouchEnd,this),f.off(T.EventType.TOUCH_END,this.onTouchEnd,this)},n.updateRotate=function(){var t=this.node,e=this.rot;if(this.curXY.y=v(this.curXY.y,l(-60),l(30)),s.rotateY(e,s.IDENTITY,-this.curXY.x),s.rotateX(e,e,this.curXY.y),s.slerp(e,t.rotation,e,.25),t.rotation=e,this.target){var i=this.target.rotation;t.position.lerp(this.target.position,.25),s.fromAxisAngle(this.rotTemp,p.UNIT_Y,-this.curXY.x),this.target.rotation=i.lerp(this.rotTemp,.25)}},n.onMouseScale=function(t){var e=t.getScrollY()>0?1:-1;this.curScale=v(this.curScale-.1*e,.25,1.5),this.node.scale=new p(this.curScale,this.curScale,this.curScale)},n.onTouchStart=function(t){for(var e=t.getID(),i=t.getUILocation(),o=0;o<2;o++){var r=this.touchs[o];if(-1==r.id){r.id=e,r.pre.set(i),r.cur.set(i),this.touchCount++;break}}},n.onTouchMove=function(t){for(var e=null,i=t.getID(),o=t.getUILocation(),r=0;r<2;r++){var n=this.touchs[r];n.id==i&&(n.cur.set(o),e=n)}if(1==this.touchCount){var a=t.getUIDelta();this.curXY.x+=.008*a.x,this.curXY.y+=.008*a.y}else if(2==this.touchCount){var c=this.touchs[0],s=this.touchs[1],h=u.distance(c.cur,s.cur),l=u.distance(c.pre,s.pre);this.curScale=v(this.curScale-.002*(h-l),.25,1.5),this.node.scale=new p(this.curScale,this.curScale,this.curScale)}e&&e.pre.set(e.cur)},n.onTouchEnd=function(t){for(var e=t.getID(),i=0;i<2;i++){var o=this.touchs[i];o.id==e&&(o.id=-1,this.touchCount--)}},n.update=function(t){this.updateRotate()},e}(d)).prototype,"distance",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),m=e(g.prototype,"vertical",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),b=e(g.prototype,"horizontal",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),w=e(g.prototype,"target",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=g))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/Collider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Agent.ts","./Body.ts","./Object.ts","./Shape.ts"],(function(i){"use strict";var e,t,r,s,o,n,a;return{setters:[function(i){e=i.createClass},function(i){t=i.cclegacy},function(i){r=i.Agent},function(i){s=i.cBody},function(i){o=i.Dirty,n=i.Trigger},function(i){a=i.ShapeSupport}],execute:function(){t._RF.push({},"e9918lPZAlNEZGC1kb/9cqo","Collider",void 0),i("cCollider",function(){function i(){this.id=0,this.pools=[],this.axis=-1,this.frameID=0,this.insertID=0,this.bodys=[],this.isDirty=!1,this.pairs=new Map}var t=i.prototype;return t.create=function(i){var e=this.pools.pop();return e?(e.object=i,e):((e=new s(i)).id=this.id++,e)},t.insert=function(i,e){void 0===e&&(e=!1),i&&(i.inCollider||(this.bodys.push(i),i.inCollider=!0),i.isRemove=!1,i.isRetrieve=!1,i.fid=this.insertID++,e&&i.object&&(i.object.isDirty=o.RTS))},t.remove=function(i,e){void 0===e&&(e=!1),i&&(i.isRemove=!0,i.isRetrieve=e)},t.reset=function(){this.axis=-1,this.frameID=0,this.isDirty=!0;for(var i=this.bodys,e=i.length-1;e>=0;e--){var t=i[e];this.pools.push(t),t.clear()}i.length=0},t.clear=function(){this.id=0,this.axis=-1,this.frameID=0,this.isDirty=!0,this.pools.length=0;for(var i=this.bodys,e=i.length-1;e>=0;e--)i[e].clear();i.length=0},t.update=function(i){this.reBuild(),this.triggers(),r.inst.process(this.bodys)},t.triggers=function(){++this.frameID;var i=this.axis,e=i>>2&3,t=i>>4&3,s=this.bodys,o=r.inst,n=0,h=0,f=s.length;for(n=0;n<f;n++){var l=s[n];if(!l.isRemove){var d=l.aabb,u=d[e],c=d[t],g=l.mask,v=l.group,p=l.upper,b=l.object;for(h=n+1;h<f;h++){var y=s[h];if(!y.isRemove){if(p<=y.lower)break;var m=y.aabb,D=y.object,R=g&y.group,x=y.mask&v;if(!(u>m[e+3]||m[e]>d[e+3]||c>m[t+3]||m[t]>d[t+3])&&(l.isAgent&&y.isAgent&&(o.check(l,y),o.check(y,l)),R||x)){var I=b.shape.type,j=D.shape.type;if(I>j){if(!a[j|I](y,l))continue}else if(!a[I|j](l,y))continue;l.id<y.id?this.onTrigger(y,l,(x?1:0)|(R?2:0)):this.onTrigger(l,y,(R?1:0)|(x?2:0))}}}}}this.endTrigger()},t.onTrigger=function(i,e,t){var r=0,s=(i.id*(i.id+1)>>1)+e.id-1,o=this.pairs,a=o.get(s);void 0!==a?(r=n.stay,a.fida==i.fid&&a.fidb==e.fid||(r=n.enter,a.fida=i.fid,a.fidb=e.fid),a.frameID=this.frameID,a.state=t):(r=n.enter,o.set(s,{id:s,a:i,b:e,fida:i.fid,fidb:e.fid,frameID:this.frameID,state:t}));var h=i.object;1&t&&h&&h.trigger&&!i.isRemove&&h.onTrigger(e,r);var f=e.object;2&t&&f&&f.trigger&&!e.isRemove&&f.onTrigger(i,r)},t.endTrigger=function(){for(var i=[],e=this.pairs,t=e.size,r=this.frameID,s=e.values(),o=0;o<t;o++){var a=s.next().value,h=a.a,f=a.b;if(a.frameID!=r||h.isRemove||f.isRemove){if(a.fida==h.fid&&a.fidb==f.fid){var l=h.object;l&&l.trigger&&!h.isRemove&&l.onTrigger(f,n.exit);var d=f.object;d&&d.trigger&&!f.isRemove&&d.onTrigger(h,n.exit)}i.push(a.id)}}for(t=i.length-1;t>=0;)e.delete(i[t--]);i.length=0},t.reBuild=function(){var i=!1,e=this.preBuildAxis();if(((3&e)!=(3&this.axis)||this.axis<0)&&(this.axis=e,i=!0),i||this.isDirty){this.isDirty=!1;var t=this.bodys;e=3&this.axis;for(var r=0,s=t.length;r!==s;r++){var o=t[r],n=o.aabb;o.lower=n[e],o.upper=n[e+3]}i?t.sort((function(i,e){return i.lower-e.lower})):this.sort(t)}},t.sort=function(i){var e,t=0,r=0;for(t=1,e=i.length;t<e;t++){var s=i[t],o=s.lower;for(r=t-1;r>=0;r--){var n=i[r];if(n.lower<=o)break;i[r+1]=n}r+1!=t&&(i[r+1]=s)}},t.preBuildAxis=function(){for(var i=0,e=0,t=0,r=0,s=0,o=0,n=0,a=0,h=0,f=0,l=this.bodys,d=l.length,u=0,c=!1,g=0;g<d;g++){var v=l[g];if(v.isRemove)v.isRetrieve&&(this.pools.push(v),v.clear()),v.inCollider=!1;else{++u<=g&&(l[u-1]=v),v.updateBound()&&(c=!0);var p=v.aabb,b=p[3]-p[0],y=p[4]-p[1],m=p[5]-p[2];a+=b*b,h+=y*y,f+=m*m;var D=.5*(p[3]+p[0]);e+=D,t+=D*D;var R=.5*(p[4]+p[1]);r+=R,s+=R*R;var x=.5*(p[5]+p[2]);o+=x,n+=x*x}}this.bodys.length=u,this.isDirty=c;var I=1/u,j=(t-e*e*I)*(a=a>0?u/a:0),T=(s-r*r*I)*(h=h>0?u/h:0),k=(n-o*o*I)*(f=f>0?u/f:0);return 0==j&&(j=a),0==T&&(T=h),0==k&&(k=f),j>T?j>k?(i=0,i|=T>k?36:24):(i=2,i|=j>T?16:4):T>k?(i=1,i|=j>k?32:8):(i=2,i|=j>T?16:4),i},e(i,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new i),this._inst}}]),i}())._inst=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"30590MX/qJKgaC8t0Gc5xmh","Config",void 0);e("Config",{demoIdx:2,totalNum:0,isRotate:!1,maxSpeed:1,maxNum:2e3,sphere:0,box:.5});t._RF.pop()}}}));

System.register("chunks:///_virtual/demo2d.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Collider.ts","./Object.ts"],(function(t){"use strict";var e,o,r,i,n,a,s,c,u,h,l,p,d,m,b,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Vec3,c=t.Quat,u=t.Prefab,h=t.CCInteger,l=t.Vec2,p=t.instantiate,d=t.clamp,m=t.Component},function(t){b=t.Config},function(t){f=t.cCollider},function(t){y=t.cObject}],execute:function(){var v,x,g,N,w,M,j,z,R,C,D,P,I;n._RF.push({},"aec98DdhcRAY77R6c3kpLNa","demo2d",void 0);var O=a.ccclass,_=a.property,E=new s,L=new c;t("demo2d",(v=O("demo2d"),x=_(u),g=_(u),N=_(h),w=_(h),M=_(l),v((R=e((z=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"box",R,i(e)),r(e,"sphere",C,i(e)),r(e,"capacity",D,i(e)),r(e,"speed",P,i(e)),r(e,"world",I,i(e)),e.objects=[],e.boxNum=0,e.sphereNum=0,e}o(e,t);var n=e.prototype;return n.resetRotation=function(){for(var t=this.objects,e=t.length,o=0;o<e;o++){t[o].setRotation(c.IDENTITY)}},n.randomRotation=function(){for(var t=this.objects,e=t.length,o=0;o<e;o++){var r=t[o];c.fromEuler(L,0,0,360*Math.random()),r.setRotation(L)}},n.onDestroy=function(){this.boxNum=0,this.sphereNum=0,this.objects.length=0,f.inst.reset()},n.addObjects=function(t,e,o){for(var r=0;r<t;r++){var i=p(e);this.node.addChild(i),E.x=(Math.random()-.5)*this.world.x,E.y=(Math.random()-.5)*this.world.y,E.z=0,i.position=E;var n=i.getComponent(y),a=Math.random()*Math.PI*2,s=this.speed*(.9*Math.random()+.1);n.velocity.x=Math.cos(a)*s,n.velocity.y=Math.sin(a)*s,n.velocity.z=0,n.name=o,b.isRotate&&(c.fromEuler(L,0,0,360*Math.random()),n.setRotation(L)),this.objects.push(n)}},n.worldManager=function(t){t*=b.maxSpeed;var e=Math.round(b.box*b.maxNum);if(e>this.boxNum){var o=d(e-this.boxNum,0,20);this.addObjects(o,this.box,"1"),this.boxNum+=o}var r=Math.round(b.sphere*b.maxNum);if(r>this.sphereNum){var i=d(r-this.sphereNum,0,20);this.addObjects(i,this.sphere,"2"),this.sphereNum+=i}for(var n=this.objects,a=0;a<n.length;a++){var s=n[a],c=s.velocity;E.set(s.getPosition()),Math.abs(E.x+c.x*t)>this.world.x/2&&(c.x=-c.x),Math.abs(E.y+c.y*t)>this.world.y/2&&(c.y=-c.y),E.x+=c.x*t,E.y+=c.y*t,E.z+=c.z*t,s.setPosition(E),e<this.boxNum&&"1"==s.name&&(s.remove(!0).destroy(),n.splice(a--,1),this.boxNum--),r<this.sphereNum&&"2"==s.name&&(s.remove(!0).destroy(),n.splice(a--,1),this.sphereNum--)}},n.update=function(t){this.worldManager(t),f.inst.update(t)},e}(m)).prototype,"box",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(z.prototype,"sphere",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(z.prototype,"capacity",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1024}}),P=e(z.prototype,"speed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),I=e(z.prototype,"world",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(960,640)}}),j=z))||j));n._RF.pop()}}}));

System.register("chunks:///_virtual/demo3d.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Collider.ts","./Object.ts","./Shape.ts","./Config.ts"],(function(e){"use strict";var t,r,o,i,n,a,s,h,u,l,c,p,d,m,b,f,y,x,v,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,s=e.Vec3,h=e.Quat,u=e.utils,l=e.primitives,c=e.Prefab,p=e.CCInteger,d=e.instantiate,m=e.MeshRenderer,b=e.clamp,f=e.Component},function(e){y=e.cCollider},function(e){x=e.cObject},function(e){v=e.ShapeType},function(e){g=e.Config}],execute:function(){var M,w,z,N,j,C,R,D,O,S,P,I,T;n._RF.push({},"66d84cnnQ1L/JC3OW0bDZP/","demo3d",void 0);var _=a.ccclass,E=a.property,L=new s,B=new h,F=u.createMesh(l.box()),Q=u.createMesh(l.sphere(.5,{segments:12}));e("demo3d",(M=_("demo3d"),w=E(c),z=E(c),N=E(p),j=E(p),C=E(s),M((O=t((D=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"box",O,i(t)),o(t,"sphere",S,i(t)),o(t,"capacity",P,i(t)),o(t,"speed",I,i(t)),o(t,"world",T,i(t)),t.objects=[],t.boxNum=0,t.sphereNum=0,t}r(t,e);var n=t.prototype;return n.resetRotation=function(){for(var e=this.objects,t=e.length,r=0;r<t;r++){e[r].setRotation(h.IDENTITY)}},n.randomRotation=function(){for(var e=this.objects,t=e.length,r=0;r<t;r++){var o=e[r];h.fromEuler(B,360*Math.random(),360*Math.random(),360*Math.random()),o.setRotation(B)}},n.onDestroy=function(){this.boxNum=0,this.sphereNum=0,this.objects.length=0,y.inst.reset()},n.addObjects=function(e,t,r){void 0===r&&(r=null);for(var o=0;o<e;o++){var i=d(t);if(this.node.addChild(i),null!=r)i.getComponent(m).mesh=r;L.x=(Math.random()-.5)*this.world.x,L.y=(Math.random()-.5)*this.world.y,L.z=(Math.random()-.5)*this.world.z,i.position=L;var n=i.getComponent(x),a=this.speed*(.9*Math.random()+.1);L.normalize().multiplyScalar(a),n.velocity.set(L),g.isRotate&&(h.fromEuler(B,360*Math.random(),360*Math.random(),360*Math.random()),n.setRotation(B)),this.objects.push(n)}},n.worldManager=function(e){e*=g.maxSpeed;var t=Math.round(g.box*g.maxNum);if(t>this.boxNum){var r=b(t-this.boxNum,0,20);this.addObjects(r,this.box,F),this.boxNum+=r}var o=Math.round(g.sphere*g.maxNum);if(o>this.sphereNum){var i=b(o-this.sphereNum,0,20);this.addObjects(i,this.sphere,Q),this.sphereNum+=i}for(var n=this.objects,a=0;a<n.length;a++){var s=n[a],h=s.velocity;L.set(s.node.position),Math.abs(L.x+h.x*e)>this.world.x/2&&(h.x=-h.x),Math.abs(L.y+h.y*e)>this.world.y/2&&(h.y=-h.y),Math.abs(L.z+h.z*e)>this.world.z/2&&(h.z=-h.z),L.x+=h.x*e,L.y+=h.y*e,L.z+=h.z*e,s.setPosition(L),t<this.boxNum&&s.type==v.Box&&(s.remove().destroy(),n.splice(a--,1),this.boxNum--),o<this.sphereNum&&s.type==v.Sphere&&(s.remove().destroy(),n.splice(a--,1),this.sphereNum--)}},n.update=function(e){this.worldManager(e),y.inst.update(e)},t}(f)).prototype,"box",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(D.prototype,"sphere",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(D.prototype,"capacity",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1024}}),I=t(D.prototype,"speed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),T=t(D.prototype,"world",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(10,10,10)}}),R=D))||R));n._RF.pop()}}}));

System.register("chunks:///_virtual/detector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts","./player.ts"],(function(t){"use strict";var e,i,r,c,o,s,n,a,u,l,p,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,c=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,n=t.PhysicsSystem,a=t.Vec3},function(t){u=t.Dirty,l=t.Trigger,p=t.cObject},function(t){d=t.Player}],execute:function(){var h,y,f,g;o._RF.push({},"d96b6StHElCqLiLQGDzzA38","detector",void 0);var b=s.ccclass,D=s.property;t("detector",b("detector")((f=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,r(e,"attackRaidus",f,c(e)),r(e,"collectRaidus",g,c(e)),e.GOODS=n.PhysicsGroup.goods,e.ENEMY=n.PhysicsGroup.enemy,e}i(e,t);var o=e.prototype;return o.start=function(){this.body.group=0,this.body.mask=this.ENEMY|this.GOODS},o.update=function(t){this.isDirty|=u.T},o.onTrigger=function(t,e){if(e!=l.exit){var i=t.getCenter(),r=this.body.getCenter(),c=a.squaredDistance(r,i);c<this.attackRaidus*this.attackRaidus&&t.group==this.ENEMY&&d.inst.onAttack(t),c<this.collectRaidus*this.collectRaidus&&t.group==this.GOODS&&d.inst.onCollect(t)}},e}(p)).prototype,"attackRaidus",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=e(y.prototype,"collectRaidus",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=y))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts","./player.ts"],(function(t){"use strict";var i,e,o,s,r,n,c,l,a;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,s=t.Vec3,r=t.Quat,n=t.PhysicsSystem},function(t){c=t.Trigger,l=t.cObject},function(t){a=t.Player}],execute:function(){var y;e._RF.push({},"ab37babyJFDhI5irIYLsBtw","enemy",void 0);var u=o.ccclass,h=(o.property,new s);new r,t("Enemy",u("Enemy")(y=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(i=t.call.apply(t,[this].concat(o))||this).PLAYER=n.PhysicsGroup.player,i.BULLET=n.PhysicsGroup.bullet,i}i(e,t);var o=e.prototype;return o.init=function(){this.follow(),this.velocity.set(this.tryVelocity)},o.update=function(t){var i=this.getPosition(),e=this.velocity;h.x=i.x+e.x*t,h.y=i.y+e.y*t,h.z=i.z+e.z*t,this.setPosition(h),this.follow()},o.follow=function(){var t=this.node.worldScale,i=this.node.worldPosition,e=a.inst.node.worldPosition;s.subtract(this.tryVelocity,e,i).normalize();var o=this.body.maxVelocity;this.tryVelocity.multiplyScalar(o);var r=Math.abs(t.x),n=t.y,c=t.z;t.set(r*(this.tryVelocity.x<0?-1:1),n,c),this.setScale(t)},o.onTrigger=function(t,i){if(i!=c.exit)switch(t.group){case this.BULLET:case this.PLAYER:}},e}(l))||y);e._RF.pop()}}}));

System.register("chunks:///_virtual/ghost.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts","./enemy.ts"],(function(t){"use strict";var e,o,n,s,i,r,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,s=t.Vec3,i=t.Quat,r=t.instantiate},function(t){c=t.Trigger},function(t){u=t.Enemy}],execute:function(){var p,h;o._RF.push({},"a6edbJLuWBGk7VWehz3M+o2","ghost",void 0);var a=n.ccclass;n.property,new s,new i,t("Ghost",a("Ghost")(((h=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.get=function(t){var e=this.pools.pop();e||(e=r(t).getComponent(o));return e},o.put=function(t){this.pools.push(t),t.remove(!1)},o.prototype.onTrigger=function(t,e){if(e!=c.exit){switch(t.group){case this.BULLET:case this.PLAYER:}o.put(this)}},o}(u)).pools=[],p=h))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/gun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bullet.ts","./bulletHell.ts"],(function(t){"use strict";var i,e,n,o,r,l,s,u,a,c,h,p,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,s=t.Vec3,u=t.Quat,a=t.Prefab,c=t.Node,h=t.Component},function(t){p=t.Bullet},function(t){f=t.BulletHell}],execute:function(){var b,y,d,m,g,v,w,T,z,D;r._RF.push({},"fe09d6P9R9NZ7Zg2YZ/bJ5g","gun",void 0);var P=l.ccclass,S=l.property,x=new s,C=new u;t("Gun",(b=P("Gun"),y=S(a),d=S(c),b((v=i((g=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,n(i,"bullet",v,o(i)),n(i,"point",w,o(i)),n(i,"speed",T,o(i)),n(i,"lifeTime",z,o(i)),n(i,"cycleTime",D,o(i)),i.minDist=0,i.nextCycle=0,i.isShoot=!1,i.direction=new s,i}e(i,t);var r=i.prototype;return r.shoot=function(t){if(!(this.nextCycle>0)){s.subtract(x,t,this.node.worldPosition);var i=x.lengthSqr();if(!this.isShoot)return this.isShoot=!0,this.minDist=i,void this.direction.set(x);i<this.minDist&&(this.minDist=i,this.direction.set(x))}},r.update=function(t){if(this.nextCycle-=t,this.isShoot){this.isShoot=!1,this.nextCycle=this.cycleTime;var i=f.inst.bullets,e=p.get(this.bullet);e.insert(i),e.init(),s.subtract(x,this.point.worldPosition,i.worldPosition),e.setPosition(x);var n=this.direction.normalize(),o=Math.atan2(n.y,n.x);u.rotateZ(C,u.IDENTITY,o),e.setRotation(C),e.velocity.set(n).multiplyScalar(this.speed),e.lifeTime=this.lifeTime,this.node.rotation=C}},i}(h)).prototype,"bullet",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(g.prototype,"point",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(g.prototype,"speed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=i(g.prototype,"lifeTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),D=i(g.prototype,"cycleTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),m=g))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,e,o,r,s,a,c,u,h,l,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.input,u=t.Input,h=t.UITransform,l=t.Vec3,p=t.Component}],execute:function(){var y,v,f,T,d,g,C,E,D,b,m;r._RF.push({},"69083fUaChAwY0BY0dL7eJL","Joystick",void 0);var w=s.ccclass,I=s.property;t("Joystick",(y=w("Joystick"),v=I(a),f=I(a),y((g=i((d=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(i,"round",g,o(i)),e(i,"inner",C,o(i)),e(i,"isStatic",E,o(i)),e(i,"isDiretion",D,o(i)),e(i,"maxRadius",b,o(i)),e(i,"activeRange",m,o(i)),i.joystickCB=null,i.touchID=-1,i}n(i,t);var r=i.prototype;return r.onLoad=function(){this.show(this.isStatic),this.isStatic?(this.round.on(a.EventType.TOUCH_START,this.touchStart,this),this.round.on(a.EventType.TOUCH_MOVE,this.touchMove,this),this.round.on(a.EventType.TOUCH_END,this.touchEnd,this),this.round.on(a.EventType.TOUCH_CANCEL,this.touchEnd,this)):(c.on(u.EventType.TOUCH_START,this.touchStart,this),c.on(u.EventType.TOUCH_MOVE,this.touchMove,this),c.on(u.EventType.TOUCH_CANCEL,this.touchEnd,this),c.on(u.EventType.TOUCH_END,this.touchEnd,this))},r.init=function(t){this.joystickCB=t},r.show=function(t){this.round.active=t},r.innerPosition=function(t){var i={type:null,active:!0,angle:0,ratio:0},n=this.round.getComponent(h).convertToNodeSpaceAR(new l(t.x,t.y));return n.z=0,n.length()<=this.maxRadius*this.activeRange?(this.inner.position=new l,i.active=!1,i):((n.length()>this.maxRadius||this.isDiretion)&&(n=(n=n.normalize()).multiplyScalar(this.maxRadius)),this.inner.position=new l(n),i.active=!0,i.angle=Math.atan2(n.y,n.x),i.ratio=n.length()/this.maxRadius,i)},r.touchStart=function(t){if(-1==this.touchID&&(this.touchID=t.getID(),!this.isStatic)){this.show(!0);var i=t.getUILocation();this.node.setWorldPosition(new l(i.x,i.y,0))}if(this.touchID!=t.getID())return!1;var n=this.innerPosition(t.getUILocation());return n.type=u.EventType.TOUCH_START,this.joystickCB&&this.joystickCB(n),!0},r.touchMove=function(t){if(this.touchID!=t.getID())return!1;var i=this.innerPosition(t.getUILocation());return i.type=u.EventType.TOUCH_MOVE,this.joystickCB&&this.joystickCB(i),!0},r.touchEnd=function(t){if(this.touchID!=t.getID())return!1;this.touchID=-1,this.show(this.isStatic),this.inner.position=new l;var i={type:u.EventType.TOUCH_END,active:!1,angle:0,ratio:0};return this.joystickCB&&this.joystickCB(i),!0},i}(p)).prototype,"round",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(d.prototype,"inner",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(d.prototype,"isStatic",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=i(d.prototype,"isDiretion",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=i(d.prototype,"maxRadius",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),m=i(d.prototype,"activeRange",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),T=d))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Joystick.ts","./AILib.ts","./Agent.ts","./Body.ts","./Collider.ts","./Maths.ts","./Object.ts","./Shape.ts","./a.mjs_cjs=&original=.js","./bullet.ts","./bulletHell.ts","./detector.ts","./enemy.ts","./ghost.ts","./gun.ts","./player.ts","./skill.ts","./snailTail.ts","./Camera3D.ts","./Config.ts","./demo2d.ts","./demo3d.ts","./main.ts","./Sprite2d.ts","./Sprite3d.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bulletHell.ts","./player.ts","./Config.ts","./demo2d.ts","./demo3d.ts"],(function(e){"use strict";var t,n,r,i,o,s,a,l,c,u,d,h,p,m,b,f,g,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Prefab,l=e.Node,c=e.Slider,u=e.Label,d=e.setDisplayStats,h=e.instantiate,p=e.Component},function(e){m=e.BulletHell},function(e){b=e.Player},function(e){f=e.Config},function(e){g=e.demo2d},function(e){x=e.demo3d}],execute:function(){var S,y,C,v,I,T,w,k,B,N,z,R,D,L,M,P,j,_,F,H,O,Z,A;o._RF.push({},"70f4fBQ365GaohfCZx0VPZN","main",void 0);var G=s.ccclass,Q=s.property;e("main",(S=G("main"),y=Q(a),C=Q(a),v=Q(a),I=Q(l),T=Q(c),w=Q(c),k=Q(u),B=Q(u),N=Q(u),z=Q(u),S((L=t((D=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,r(t,"demo2d",L,i(t)),r(t,"demo3d",M,i(t)),r(t,"demoBullet",P,i(t)),r(t,"demosNode",j,i(t)),r(t,"sbox",_,i(t)),r(t,"sSphere",F,i(t)),r(t,"boxTxt",H,i(t)),r(t,"sphereTxt",O,i(t)),r(t,"speedTxt",Z,i(t)),r(t,"totalTxt",A,i(t)),t.currScense=null,t}n(t,e);var o=t.prototype;return o.start=function(){var e=this;d(!0),this.changeDemos(),this.schedule((function(){var t=0;switch(f.demoIdx){case 0:t=e.currScense.getComponentInChildren(g).objects.length;break;case 1:t=e.currScense.getComponentInChildren(x).objects.length;break;case 2:t=e.currScense.getComponentInChildren(m).objects.children.length}e.totalTxt.string=""+t}),.1)},o.changeDemos=function(){var e=this;switch(this.currScense&&(this.currScense.removeFromParent(),this.currScense.destroy(),this.currScense=null),f.demoIdx){case 0:this.currScense=h(this.demo2d),this.node.getChildByName("Left").active=!0,this.node.getChildByName("Skill").active=!1;break;case 1:this.currScense=h(this.demo3d),this.node.getChildByName("Left").active=!0,this.node.getChildByName("Skill").active=!1;break;case 2:this.currScense=h(this.demoBullet),this.node.getChildByName("Left").active=!1,this.node.getChildByName("Skill").active=!0}this.scheduleOnce((function(){e.demosNode.addChild(e.currScense)}))},o.onDemos=function(e){var t=e.target.getSiblingIndex();t!=f.demoIdx&&(f.demoIdx=t,this.changeDemos())},o.onSpeed=function(e){f.maxSpeed=e.progress,this.speedTxt.string="speed:"+Math.round(100*f.maxSpeed)},o.onRotation=function(e){if(f.isRotate!=e.isChecked)switch(f.isRotate=e.isChecked,f.demoIdx){case 0:f.isRotate?this.currScense.getComponentInChildren(g).randomRotation():this.currScense.getComponentInChildren(g).resetRotation();break;case 1:f.isRotate?this.currScense.getComponentInChildren(x).randomRotation():this.currScense.getComponentInChildren(x).resetRotation()}},o.onSphere=function(e){var t=f.maxNum,n=e.progress;n+f.box>=1&&(this.boxTxt.string="box:"+Math.round((1-n)*t),this.sbox.progress=1-n,f.box=1-n),this.sphereTxt.string="sphere:"+Math.round(n*t),e.progress=n,f.sphere=n},o.onBox=function(e){var t=f.maxNum,n=e.progress;n+f.sphere>=1&&(this.sphereTxt.string="sphere:"+Math.round((1-n)*t),this.sSphere.progress=1-n,f.sphere=1-n),this.boxTxt.string="box:"+Math.round(n*t),e.progress=n,f.box=n},o.onSkill=function(e){b.inst.onSkill(),e.target.active=!1,this.scheduleOnce((function(){2==f.demoIdx&&(e.target.active=!0)}),5)},t}(p)).prototype,"demo2d",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(D.prototype,"demo3d",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(D.prototype,"demoBullet",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(D.prototype,"demosNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(D.prototype,"sbox",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(D.prototype,"sSphere",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(D.prototype,"boxTxt",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(D.prototype,"sphereTxt",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(D.prototype,"speedTxt",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"totalTxt",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=D))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/Maths.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"82bedpBhDZGm7EUB0uAnjUn","Maths",void 0);t("Line",(function(){this.weight=.5,this.direction=void 0,this.point=void 0}));var i=t("Vector2",function(){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return t.multiply=function(t,n){return t.x*n.x+t.y*n.y},t.multiply2=function(n,i){return new t(i.x*n,i.y*n)},t.division=function(n,i){return 0==i&&(i=1),new t(n.x/i,n.y/i)},t.subtract=function(n,i){return new t(n.x-i.x,n.y-i.y)},t.addition=function(n,i){return new t(n.x+i.x,n.y+i.y)},t}()),r=t("RVOMath",function(){function t(){}return t.abs=function(t){return this.sqrt(this.absSq(t))},t.absSq=function(t){return i.multiply(t,t)},t.normalize=function(t){return i.division(t,this.abs(t))},t.det=function(t,n){return t.x*n.y-t.y*n.x},t.distSqPointLineSegment=function(t,n,r){var u=i.multiply(i.subtract(r,t),i.subtract(n,t))/this.absSq(i.subtract(n,t));return u<0?this.absSq(i.subtract(r,t)):u>1?this.absSq(i.subtract(r,n)):this.absSq(i.subtract(r,i.addition(t,i.multiply2(u,i.subtract(n,t)))))},t.fabs=function(t){return Math.abs(t)},t.leftOf=function(t,n,r){return this.det(i.subtract(t,r),i.subtract(n,t))},t.sqr=function(t){return t*t},t.sqrt=function(t){return Math.sqrt(t)},t.transfromFloat=function(t){return Math.floor(10*t)/10},t}());r.RVO_EPSILON=1e-5,r.RVO_POSITIVEINFINITY=1e13,n._RF.pop()}}}));

System.register("chunks:///_virtual/Object.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Collider.ts","./Shape.ts"],(function(t){"use strict";var e,i,n,r,o,s,a,u,c,h,l,p,y,g,f,b,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.ccenum,u=t.PhysicsSystem,c=t.Vec2,h=t.Vec3,l=t.UITransform,p=t.Node,y=t.Component},function(t){g=t.cCollider},function(t){f=t.ShapeType,b=t.cPolygon,d=t.cSphere,m=t.cBox}],execute:function(){var S,w,v,T,x,z,R,D,P,A,O,B,C,N,V,j,k,F,I,L,_,E,M,G,U;t({Dirty:void 0,Trigger:void 0}),o._RF.push({},"f834eM8pElOqJ717Yz/Xt9+","Object",void 0);var q,H,J=s.ccclass,X=s.property;!function(t){t[t.default=0]="default",t[t.enter=1]="enter",t[t.stay=2]="stay",t[t.exit=3]="exit"}(q||(q=t("Trigger",{}))),function(t){t[t.R=1]="R",t[t.T=2]="T",t[t.S=4]="S",t[t.RTS=7]="RTS",t[t.RS=5]="RS",t[t.NON=0]="NON"}(H||(H=t("Dirty",{}))),a(f);t("cObject",(S=J("cObject"),w=X({group:"Body"}),v=X({type:u.PhysicsGroup,group:"Body"}),T=X({type:f,group:"Shape"}),x=X({group:"Shape"}),z=X({group:"Shape",visible:function(){return this.type==f.Box}}),R=X({group:"Shape",visible:function(){return this.type==f.Sphere}}),D=X({type:[c],group:"Shape",visible:function(){return this.type==f.Polygon}}),P=X({group:"Agent"}),A=X({min:.01,max:1,step:.01,group:"Agent",visible:function(){return this.agent}}),O=X({group:"Agent",visible:function(){return this.agent}}),B=X({group:"Agent",visible:function(){return this.agent}}),S((V=e((N=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"trigger",V,r(e)),n(e,"group",j,r(e)),n(e,"type",k,r(e)),n(e,"center",F,r(e)),n(e,"size",I,r(e)),n(e,"radius",L,r(e)),n(e,"points",_,r(e)),n(e,"agent",E,r(e)),n(e,"weight",M,r(e)),n(e,"maxRadius",G,r(e)),n(e,"maxVelocity",U,r(e)),e.tryVelocity=new h,e.velocity=new h,e.isDirty=H.RTS,e.shape=null,e.body=null,e}i(e,t);var o=e.prototype;return o.onLoad=function(){switch(this.type){case f.Box:this.shape=new m(this.center,this.size);break;case f.Sphere:this.shape=new d(this.center,this.radius);break;case f.Polygon:this.shape=new b(this.center,this.points)}this.body=g.inst.create(this),this.body.shape=this.shape,this.body.group=this.group,this.body.isAgent=this.agent,this.body.weight=this.weight,this.body.neighborDist=this.maxRadius,this.body.maxVelocity=this.maxVelocity,this.body.mask=u.instance.collisionMatrix[this.group],g.inst.insert(this.body),this.isDirty=H.RTS},o.setPosition=function(t){this.node.position=t,this.isDirty|=H.T},o.setRotation=function(t){this.node.rotation=t,this.isDirty|=H.R},o.setScale=function(t){this.node.scale=t,this.isDirty|=H.S},o.setAnchor=function(t){var e=this.center,i=this.shape.center,n=this.node.getComponent(l);if(n){n.anchorPoint=t;var r=n.contentSize;i.x=(.5-t.x)*r.width+e.x,i.y=(.5-t.y)*r.height+e.y,this.isDirty|=H.T}},o.getRotation=function(){return this.node.rotation},o.getPosition=function(){return this.node.position},o.getScale=function(){return this.node.scale},o.remove=function(t){return void 0===t&&(t=!0),g.inst.remove(this.body,t),this.node.removeFromParent(),this.node},o.insert=function(t){g.inst.insert(this.body,!0),this.node.parent!=t&&t.addChild(this.node)},o.setAnimation=function(t){},o.setColor=function(t){},o.init=function(){},o.onTrigger=function(t,e){switch(e){case q.enter:case q.stay:case q.exit:}},o.hasChangeDirty=function(){var t=this.isDirty,e=this.node.hasChangedFlags;return e&&(e&p.TransformBit.POSITION&&(t|=H.T),e&p.TransformBit.ROTATION&&(t|=H.R),e&p.TransformBit.SCALE&&(t|=H.S)),this.isDirty=H.NON,t},o.onDestroy=function(){g.inst.remove(this.body,!0),this.unscheduleAllCallbacks(),this.shape=null,this.body=null},e}(y)).prototype,"trigger",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=e(N.prototype,"group",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.PhysicsGroup.DEFAULT}}),k=e(N.prototype,"type",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Box}}),F=e(N.prototype,"center",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),I=e(N.prototype,"size",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),L=e(N.prototype,"radius",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=e(N.prototype,"points",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=e(N.prototype,"agent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=e(N.prototype,"weight",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),G=e(N.prototype,"maxRadius",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=e(N.prototype,"maxVelocity",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=N))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts","./bulletHell.ts","./gun.ts","./skill.ts"],(function(t){"use strict";var e,n,i,o,r,s,l,a,c,u,y,h,p,f,v,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,l=t._decorator,a=t.Vec3,c=t.Quat,u=t.Prefab,y=t.Input},function(t){h=t.Trigger,p=t.cObject},function(t){f=t.BulletHell},function(t){v=t.Gun},function(t){g=t.Skill}],execute:function(){var d,b,P,k,T,M;s._RF.push({},"069bfPViMNIZohyngFLLVnE","player",void 0);var _=l.ccclass,m=l.property,w=new a;new c,t("Player",(d=_("Player"),b=m(u),d(((M=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"skill",T,o(e)),e.guns=[],e.velocity=new a,e}n(e,t);var s=e.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this),e._inst=this},s.start=function(){var t=this;this.guns=this.node.getComponentsInChildren(v);var e=f.inst.joystick;e&&e.init((function(e){var n=e.angle,i=e.ratio;switch(e.type){case y.EventType.TOUCH_START:t.velocity.set(a.ZERO);break;case y.EventType.TOUCH_MOVE:t.velocity.set(Math.cos(n),Math.sin(n),0),t.velocity.multiplyScalar(t.maxVelocity*i);break;case y.EventType.TOUCH_END:t.velocity.set(a.ZERO)}}))},s.update=function(t){var e=this.getPosition(),n=this.velocity;w.x=e.x+n.x*t,w.y=e.y+n.y*t,w.z=e.z+n.z*t,this.setPosition(w)},s.onAttack=function(t){for(var e=this.guns,n=e.length,i=0;i<n;i++){var o=t.getCenter();e[i].shoot(o)}},s.onSkill=function(){for(var t=Math.random()*Math.PI*2,e=0;e<3;e++){var n=f.inst.bullets,i=g.get(this.skill);i.insert(n),i.init(),a.subtract(w,this.node.worldPosition,n.worldPosition),i.setPosition(w);t+=2*Math.PI/3;var o=Math.cos(t),r=Math.sin(t);i.velocity.set(o,r,0).multiplyScalar(300),i.angle=0,i.lifeTime=3}},s.onCollect=function(t){},s.onTrigger=function(t,e){h.exit},r(e,null,[{key:"inst",get:function(){return this._inst}}]),e}(p))._inst=null,T=e((k=M).prototype,"skill",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=k))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/Shape.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AILib.ts"],(function(t){"use strict";var e,n,i,r,s,o,a,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Vec3,r=t.Vec2},function(t){s=t.obbIntersect,o=t.sphereAABBDistance,a=t.sphereOBBDistance,h=t.default}],execute:function(){var u;t("ShapeType",void 0),n._RF.push({},"83d94jbLnZF7oVs2WQ1jJK+","Shape",void 0),function(t){t[t.Box=1]="Box",t[t.Sphere=2]="Sphere",t[t.Polygon=4]="Polygon"}(u||(u=t("ShapeType",{})));var c=t("cShape",function(){function t(t,e){this.radius=0,this.height=0,this.type=u.Box,this.point2Ds=[],this.size={x:0,y:0,z:0},this.scale={x:1,y:1,z:1},this.center={x:0,y:0,z:0},this.aabb=[0,0,0,0,0,0],this.type=e,this.center.x=t.x,this.center.y=t.y,this.center.z=t.z}return t.prototype.updateAABB=function(t,e,n){void 0===n&&(n=!0);var i=this.size,r=this.center,s=t.x,o=t.y,a=t.z,h=r.x,u=r.y,c=r.z,g=.5*i.x,y=.5*i.y,l=.5*i.z,p=this.aabb;if(n)g=Math.abs(g*s),y=Math.abs(y*o),l=Math.abs(l*a),p[0]=h*s-g,p[1]=u*o-y,p[2]=c*a-l,p[3]=h*s+g,p[4]=u*o+y,p[5]=c*a+l;else{var x=e.m00*s,f=e.m01*s,z=e.m02*s,b=e.m03*o,S=e.m04*o,v=e.m05*o,d=e.m06*a,B=e.m07*a,P=e.m08*a,M=x*h+b*u+d*c,m=f*h+S*u+B*c,C=z*h+v*u+P*c,R=Math.abs(x)*g+Math.abs(b)*y+Math.abs(d)*l,w=Math.abs(f)*g+Math.abs(S)*y+Math.abs(B)*l,A=Math.abs(z)*g+Math.abs(v)*y+Math.abs(P)*l;p[0]=M-R,p[1]=m-w,p[2]=C-A,p[3]=M+R,p[4]=m+w,p[5]=C+A}return p},t}()),g=(t("cBox",function(t){function n(e,n){var i;(i=t.call(this,e,u.Box)||this).size.x=n.x,i.size.y=n.y,i.size.z=n.z;var s=i.point2Ds;return s[0]=new r(-n.x/2,n.y/2),s[1]=new r(n.x/2,n.y/2),s[2]=new r(n.x/2,-n.y/2),s[3]=new r(-n.x/2,-n.y/2),i}return e(n,t),n}(c)),t("cSphere",function(t){function n(e,n){var i;return(i=t.call(this,e,u.Sphere)||this).radius=n,i.size.x=2*n,i.size.y=2*n,i.size.z=2*n,i}return e(n,t),n}(c)),t("cPolygon",function(t){function n(e,n){var i;(i=t.call(this,e,u.Polygon)||this).point2Ds=n;for(var r=n[0].x,s=n[0].y,o=r,a=s,h=n.length,c=1;c<h;c++){var g=n[c].x,y=n[c].y;r>=g?r=g:o<=g&&(o=g),s>=y?s=y:a<=y&&(a=y)}return i.size.x=o-r,i.size.y=a-s,i.size.z=0,i}return e(n,t),n}(c)),new i),y=new r,l=t("ShapeSupport",[]);l[u.Box|u.Box]=function(t,e){return!(!t.isIdentity||!e.isIdentity)||s(t.getCenter(),t.getHalfSize(),t.getRotMat3(),e.getCenter(),e.getHalfSize(),e.getRotMat3())},l[u.Box|u.Sphere]=function(t,e){return t.isIdentity?(i.subtract(g,e.getCenter(),t.getCenter()),o(g,e.getRaidus(),t.getHalfSize())):a(e.getCenter(),e.getRaidus(),t.getCenter(),t.getRotation(),t.getHalfSize())},l[u.Sphere|u.Sphere]=function(t,e){var n=t.getCenter(),r=e.getCenter();i.subtract(g,n,r);var s=g.lengthSqr(),o=t.getRaidus()+e.getRaidus();return s<=o*o},l[u.Box|u.Polygon]=function(t,e){return h.polygonPolygon(t.getPoints(),e.getPoints())},l[u.Sphere|u.Polygon]=function(t,e){var n=t.getCenter(),i=t.getRaidus();return y.x=n.x,y.y=n.y,h.polygonCircle(e.getPoints(),y,i)},l[u.Polygon|u.Polygon]=function(t,e){return h.polygonPolygon(t.getPoints(),e.getPoints())},n._RF.pop()}}}));

System.register("chunks:///_virtual/skill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts"],(function(t){"use strict";var e,i,o,n,s,r,l,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,n=t.Vec3,s=t.Quat,r=t.instantiate},function(t){l=t.Trigger,c=t.cObject}],execute:function(){var u,a;i._RF.push({},"2fedeWZKpxDbopwo7jBz3Ko","skill",void 0);var p=o.ccclass,f=(o.property,new n),h=new s;t("Skill",p("Skill")(((a=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).lifeTime=0,e.angle=0,e}e(i,t),i.get=function(t){var e=this.pools.pop();e||(e=r(t).getComponent(i));return e},i.put=function(t){this.pools.push(t),t.remove(!1)};var o=i.prototype;return o.update=function(t){if(this.lifeTime-=t,this.lifeTime<0)i.put(this);else{var e=this.getPosition(),o=this.velocity;f.x=e.x+o.x*t,f.y=e.y+o.y*t,f.z=e.z+o.z*t,this.angle+=60*t*60,s.fromEuler(h,0,0,this.angle),this.setRotation(h),this.setPosition(f)}},o.onTrigger=function(t,e){l.exit},i}(c)).pools=[],u=a))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/snailTail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts","./enemy.ts"],(function(t){"use strict";var n,e,i,o,s,r,c,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Vec3,s=t.Quat,r=t.instantiate},function(t){c=t.Trigger},function(t){u=t.Enemy}],execute:function(){var a,l;e._RF.push({},"d2a8aUstylHNbyhzHGRhhbK","snailTail",void 0);var p=i.ccclass;i.property,new o,new s,t("SnailTail",p("SnailTail")(((l=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.get=function(t){var n=this.pools.pop();n||(n=r(t).getComponent(e));return n},e.put=function(t){this.pools.push(t),t.remove(!1)},e.prototype.onTrigger=function(t,n){if(n!=c.exit){switch(t.group){case this.BULLET:case this.PLAYER:}e.put(this)}},e}(u)).pools=[],a=l))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Sprite2d.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts"],(function(t){"use strict";var i,r,e,o,s,n,c;return{setters:[function(t){i=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Sprite,s=t.Color},function(t){n=t.Trigger,c=t.cObject}],execute:function(){var u;r._RF.push({},"a1d56boT3VNfoNbbf/ozJuZ","Sprite2d",void 0);var p=e.ccclass;e.property,t("Sprite2d",p("Sprite2d")(u=function(t){function r(){for(var i,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).sprite=null,i.isHit=!1,i}i(r,t);var e=r.prototype;return e.start=function(){this.sprite=this.node.getComponent(o)},e.setColor=function(t){this.sprite&&(this.sprite.color=t)},e.update=function(t){this.setColor(this.isHit?s.GREEN:s.WHITE),this.isHit=!1},e.onTrigger=function(t,i){var r=i!=n.exit;r&&!this.isHit&&(this.isHit=r)},r}(c))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/Sprite3d.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts"],(function(t){"use strict";var r,i,e,o,s,n,c;return{setters:[function(t){r=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.MeshRenderer,s=t.Color},function(t){n=t.Trigger,c=t.cObject}],execute:function(){var l;i._RF.push({},"56ae8Cu2nlC9o6PKDYcYpcB","Sprite3d",void 0);var a=e.ccclass;e.property,t("Sprite3d",a("Sprite3d")(l=function(t){function i(){for(var r,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(r=t.call.apply(t,[this].concat(e))||this).isHit=!1,r.color=new s,r.sprite=null,r.colorData=new Float32Array(4),r}r(i,t);var e=i.prototype;return e.start=function(){this.sprite=this.node.getComponent(o),this.sprite.model._worldBounds=null,this.setColor(s.WHITE)},e.setColor=function(t){if(this.sprite&&!this.color.equals(t)){var r=this.colorData;r[0]=t.r/255,r[1]=t.g/255,r[2]=t.b/255,r[3]=t.a/255,this.sprite.setInstancedAttribute("i_color",this.colorData)}},e.update=function(t){this.setColor(this.isHit?s.GREEN:s.WHITE),this.isHit=!1},e.onTrigger=function(t,r){var i=r!=n.exit;i&&!this.isHit&&(this.isHit=i)},i}(c))||l);i._RF.pop()}}}));
